# yaml-language-server: $schema=https://raw.githubusercontent.com/ast-grep/ast-grep/main/schemas/rule.json

id: map-key-case
message: Wrong case for a <[CMA]-[A-Z]>.
severity: info # error, warning, info, hint
language: Lua
rule:
  pattern: $BAD_KEY
  kind: string
  regex: ^["']<[CcMmAa]-[a-zA-Z]>["']$
  any:
    - regex: '<[Aa]-[a-zA-Z]>'
    - regex: '<[cm]-[a-zA-Z]>'
    - regex: '<[CM]-[a-z]>'
transform:
  CM_KEY:
    replace:
      source: $BAD_KEY
      replace: '<[Aa]-(.)>'
      by: '<M-$1>'
  GOOD_KEY:
    convert:
      source: $CM_KEY
      toCase: upperCase
fix: $GOOD_KEY
